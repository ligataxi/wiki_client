В данном разделе создается связь между внешним оборудованием клиента (шлюзами либо sip-номерами) и программным обеспечением LigaTaxi. Интеграцию настраивают сотрудники службы технической поддержки компании.

Для создания транка (интеграции номера и программы) необходимо нажать на кнопку “Добавить”, и заполнить следующие поля настроек:

* Название транка - произвольное название для создаваемой интеграции. Для удобства добавляется в стандартном формате номер слота шлюза (либо префикс sip) + подключаемый номер телефона в международном формате
* Номер телефона - укажите номер линии шлюза, либо номер sip-телефонии. В большинстве случаев соответствует имени пользователя
* Имя пользователя - укажите логин, используемый данным номером для авторизации на сервере телефонии программы (входящая маршрутизация) либо сервере провайдера телефонии (номера с исходящей регистрацией/без регистрации)
* Пароль - укажите пароль, используемый данным номером для авторизации на сервере телефонии программы (входящая маршрутизация) либо сервере провайдера телефонии (номера с исходящей регистрацией/без регистрации)
* Тип регистрации - поддерживаются три типа регистрации:
    * Входящая регистрация - указывается в случаях подключения GSM и аналоговых шлюзов в программе. Означает, что внешнее оборудование регистрируется на сервере телефонии LigaTaxi. При выборе данного типа регистрации доступно следующее поле настроек:
        * Префикс - укажите порядковый номер подключаемой линии. Например, в шлюзе на 4 номера здесь нужно указать значение от 1 до 4 соответственно порядковому номеру подключаемой линии
    * Исходящая регистрация - указывается в случаях, когда подключаемый транк будет регистрироваться на сервере провайдера телефонии (сервер программы регистрируется на сервере провайдера телефонии). При выборе данного типа регистрации становятся доступны следующие поля настроек:
        * Sip server - укажите веб-адрес сервера провайдера телефонии, на котором должен быть зарегистрирован транк
        * Sip port - укажите значение порта, через который должен осуществляться обмен пакетами между сервером телефонии LigaTaxi и сервером провайдера телефонии
        * From domain - домен, может использоваться вместо ip, определяет, куда отправлять данные для регистрации
    * “---” - данное обозначение используется для номеров с безусловной регистрацией по логину и ip-адресу. Создавать транки с подобным типом регистрации могут только сотрудники службы технической поддержки. В большинстве случаев это короткие номера, предоставляемые провайдером телефонии
* Чекбокс “Включен” - используется для активации/деактивации транка по необходимости

После внесения всех настроек необходимо нажать на кнопку “Сохранить”, а также на кнопку “Применить конфигурацию к серверу”. Идентификатором успешной регистрации транка будет строка вида “Status: UP…” в его настройках.

Статус состояния транка можно проверить, перейдя в него. Внизу страницы будет доступна строка состояния, в которой могут быть следующие значения:

* для любого типа регистрации:
    * Status: Disabled - транк выключен (чекбокс “Включен” находится в неактивном положении)
* для входящей регистрации:
    * Status: DOWN, Contact: user_not_registered - cоединение не установлено, от внешнего сервера не поступил запрос на установление соединения, прием звонков невозможен
    * Status: UP, Contact: [любые данные] Соединение установлено, возможен прием звонков
* для исходящей регистрации:
    * Status: Unknown, Contact: Unknown  - неверно внесены данные (сервер LigaTaxi не может передать данные в правильном формате - неизвестен адрес назначения, невозможно создать строку подключения)
    * Status: DOWN, Contact: [любые данные] регистрация на сервере провайдера не прошла
        Status: UP, Contact: [любые данные] Все Ок
*  без регистрации:
    * Status: UP, Contact: [любые данные] - Все Ок (важно: заранее проверка готовности другого сервера принять звонок не проводится)