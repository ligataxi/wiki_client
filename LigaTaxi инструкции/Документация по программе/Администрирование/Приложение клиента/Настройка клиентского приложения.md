**Инструкция по настройке клиентского приложения LigaTaxi**

Для настройки клиентского приложения необходимо выполнить следующие шаги:

1. Для начала создать отдельный тип заказа:

Перейти в Администрирование - Обработка заказов - типы заказов

Открыть Текущий тип заказа (тот который вы по умолчанию используется для заказов через оператора) - в правом верхнем углу нажать кнопку Копировать.

![](https://txcloud.atlassian.net/wiki/download/thumbnails/185827349/att_1_for_185827349.png?version=1&modificationDate=1611920077328&cacheVersion=1&api=v2&width=680&height=281)

![](https://txcloud.atlassian.net/wiki/download/thumbnails/185827349/att_2_for_185827349.png?version=1&modificationDate=1611920076650&cacheVersion=1&api=v2&width=680&height=249)

2. Открыть Текущий Копия.

* В поле название указываем Клиентское приложение
    ![](https://txcloud.atlassian.net/wiki/download/thumbnails/185827349/att_3_for_185827349.png?version=1&modificationDate=1611920076659&cacheVersion=1&api=v2&width=646&height=311)

* В поле Цвет указываем каким цветом будут на рабочем месте отображаться заказы с клиентского приложения.
* В поле Доступен для выбора оператором снять галочку
* Нажать Сохранить

3. Открыть тип заказа Клиентское приложение и перейти на вкладку Автоинформирование.

* В колонке Статус заказа выбрать по какому статусу нужно оповещать клиентов.
* В колонке Шаблон уведомления выбираете подходящий вариант уведомления ( push notification - уведомления, которые приходят в клиентском приложении через интернет, они бесплатные)
* в поле оператор связи добавить всех операторов связи
* Нажать Сохранить.
    ![](https://txcloud.atlassian.net/wiki/download/thumbnails/185827349/att_4_for_185827349.png?version=1&modificationDate=1611920076662&cacheVersion=1&api=v2&width=578&height=229)

4. Если нужно создать дополнительные шаблоны для уведомлений или отредактировать существующие, необходимо перейти в раздел Администрирование - Обработка заказов - Шаблоны уведомлений

![](https://txcloud.atlassian.net/wiki/download/thumbnails/185827349/att_5_for_185827349.png?version=1&modificationDate=1611920077355&cacheVersion=1&api=v2&width=680&height=270)

Открыть тот, что нужно отредактировать. В поле Шаблон указать текст уведомления. Если нужно добавить информацию о авто, водителе, бонусном балансе и т.д., - в правом верхнем углу нажать знак вопроса и в шаблон добавить переменные. Сохранить.

![](https://txcloud.atlassian.net/wiki/download/thumbnails/185827349/att_6_for_185827349.png?version=1&modificationDate=1611920077143&cacheVersion=1&api=v2&width=578&height=233)

Для добавления нового шаблона нажать в правом верхнем углу кнопку Добавить. Далее следовать инструкции, которая находится под знаком вопроса в правом верхнем углу.

По завершению создания нового шаблона перейти в Администрирование - Обработка заказов - Типы заказов и выполнить пункт 3.

Далее добавить тип заказа в тариф. Для этого перейти в Администрирование - Тарифы - Тарифы. Открыть тариф - в поле Типы заказов добавить Клиентское приложение.

![](https://txcloud.atlassian.net/wiki/download/thumbnails/185827349/att_7_for_185827349.png?version=1&modificationDate=1611920076770&cacheVersion=1&api=v2&width=578&height=232)

Обратите внимание!! Если для клиентского приложения будут использоваться другие расценки для просчета стоимости, чем при создании заказа оператором, необходимо создавать новый тариф (зайти в тариф используемый для просчета заказа у оператора на рабочем месте - в правом верхнем углу нажать копировать. После открыть скопированный тариф, внести изменения, поставить галочку включен. Добавить тип заказа Клиентское приложение ).

Далее перейти в Администрирование - Приложение клиента - Название приложения

![](https://txcloud.atlassian.net/wiki/download/thumbnails/185827349/att_8_for_185827349.png?version=1&modificationDate=1611920076529&cacheVersion=1&api=v2&width=578&height=366)

![](https://txcloud.atlassian.net/wiki/download/thumbnails/185827349/att_9_for_185827349.png?version=1&modificationDate=1611920076822&cacheVersion=1&api=v2&width=578&height=274)

В этом разделе происходят основные настройки приложения. Нужно заполнить все поля.

* **Название профиля -** название приложения, которое клиент будет видеть после загрузки логотипа.
* **Проверка номера телефона** - данное поле позволяет проверять номер телефона клиента на подлинность, чтобы избежать регистрации клиентов с несуществующими номерами. (Обратите внимание!!! Для проверки номера отправляется специальный код на указанный номер. Для отправки этого кода используется смс шлюз. Если смс шлюз еще не подключен или не хотите использовать данную функцию галочку можно снять).

![](https://txcloud.atlassian.net/wiki/download/thumbnails/185827349/att_10_for_185827349.png?version=1&modificationDate=1611920076659&cacheVersion=1&api=v2&width=578&height=271)

* **Visible bonus balance (отображать бонусный баланс клиента) -** данная настройка позволяет отображать бонусы клиента в клиентском приложении.
* **Видимый безналичный тип оплаты -** если включен, то клиенты могут оплачивать поездки безналичным типом оплаты, который используется чаще для оплаты заказов контрагентами.
* **Опции автомобиля -** опции авто, которые клиент может выбрать в клиентском приложении при оформлении заказа (если опций нет, можно оставить поле пустым).
* **Требования к водителю - требования к водителю,** которые клиент может выбрать в клиентском приложении при оформлении заказа( если такого нет, поле можно оставить пустым).
* **Причины отмены -** причины, которые клиент может выбрать при отмене заказа в приложении. ( Рекомендуем создать специальные причины отмены, которые будут доступны только для отмены заказа клиентом. Это можно сделать в разделе Справочники - Причины отмены - добавить).
* **Показывать автомобили -** параметр, позволяющий включать или отключать отображение автомобилей на карте в приложении до оформления заказа. (Данная настройка не влияет на отображение авто после принятия заказа водителем).
    ![](https://txcloud.atlassian.net/wiki/download/thumbnails/185827349/att_11_for_185827349.png?version=1&modificationDate=1611920076945&cacheVersion=1&api=v2&width=578&height=128)

* **Населенные пункты -** Населенные пункты в которые возможна подача автомобиля. В данное поле возможно добавить до 5 населенных пунктов. Если работа приложения ведется в более чем 5 населенных пунктах, нужно в разделе Справочники - Адреса - Населенные пункты добавить населенный пункт, который будет охватывать область, в которой будет работать приложение и добавить его в настройках приложения.
* **Минимальное время подачи -** это минимально время через которое водитель может быть у адреса подачи от времени создания заказа. Указывается в минутах.
* **Максимальное время подачи -** максимально время подачи, которое можно указать при создания заказа. Указывается в минутах.
* **Редактирование стоимости поездки включено -** функционал, позволяющий пассажирам увеличивать или уменьшать стоимость поездки. При увеличении стоимости поездки отображается уведомление о повышении шансов найти авто, при уменьшении - что шансы найти авто уменьшаются.

Данный функционал можно отключить, сняв галочку.

* **Сумма максимального повышения -** на какую сумму максимально пассажир может повысить стоимость поездки
* **Процент максимального повышения -** на какой процент от первоначальной стоимости поездки пассажир может повысить стоимость поездки
* **Сумма максимального понижения -** на какую сумму пассажир может уменьшить стоимость поездки
* **Процент максимального понижения -** на какой процент от первоначальной стоимости поездки пассажир может понизить стоимость поездки
* **Тип оплаты наличными -** выбрать из списка тип оплаты, который соответствует оплате наличными
* **Тип оплаты кредитной картой -** выбрать из списка тип оплаты, который соответствует оплате банковской картой (доступно, если у вас подключена платежная система)
* **Тип оплаты бонусами -** выбрать из списка тип оплаты, который соответствует оплате бонусами
* **Безналичный тип оплаты -** выбрать из списка тип оплаты, который соответствует оплате по безналу (используется для расчета контрагентами)
* **Шлюз для отправки SMS -** шлюз, через который будет происходить отправка кода для подтверждения номера при регистрации в приложении или для восстановления пароля, если пассажир его забыл.
* **SMS для подтверждения номера -** смс шаблон, который будет отправлен пассажиру при регистрации пассажира
* **SMS для восстановления пароля -** смс шаблон, который будет отправлен пассажиру для восстановлении пароля
* **Номера телефонов диспетчерской -** в данном поле можно указать номера телефонов диспетчерской, которые клиент сможет увидеть в своем приложении, и воспользоваться ими для связи с оператором. При необходимости можно добавить несколько номеров. Для этого установите курсор в поле, введите нужный номер телефона и нажмите Enter.
* **Политика конфиденциальности -** в данном поле указывается юридическая информация, касающаяся обработки службой такси персональных данных клиентов( если на момент настроек у вас не готова информация, в поле поставьте несколько пробелов!).
* **Описание приложения -** поле служит для предоставления клиенту короткого описания приложения( можете добавить в это поле описание, которое размещено в Play маркете).
* **Способ соединения с водителем -** переключатель, позволяющий включить либо выключить для клиента возможность связи с водителем. По умолчанию выключен. При установленном значении “Клиент <-> Водитель” клиент увидит в своем приложении номер телефона водителя, который принял его заказ.
* **Поставщик карт -** выпадающий список, в котором можно указать предпочтительный вариант сервиса картографии, который будет использоваться в приложении всех клиентов (не влияет на поиск адресов в приложении).
* **Чекбокс “Показывать минимальную стоимость поездки”** - в активном положении позволяет отображать клиенту информацию о минимальной стоимости заказа такси при формировании заказа. Актуально, если клиент не указывает желаемый адрес назначения при вызове такси.
* **Чекбокс “Разрешено использовать приложение контрагентами” -** в активном положении позволяет контрагентам заказывать такси через приложение, минуя диспетчерскую службу.
* **Чекбокс “Адрес назначения обязателен для заполнения” -** в активном положении клиент не сможет создать заказ без указания конечной точки маршрута.
* **Формат имени водителя -** позволяет определить формат, в котором будет отображаться имя водителя, который принял заказ, в приложении клиента. Доступны комбинации из трех вариантов: “Первое слово из полного имени”, “Второе слово из полного имени”, “Третье слово из полного имени”.

Перейти на вкладку “Типы автомобилей” - в данном разделе задается выбор доступных для заказа из клиентского приложения типов автомобилей, которыми сможет воспользоваться пассажир.

Стрелками возле названий типов авто можно выставить очередность отображения их в клиентском приложении.

Для настройки нужно открыть первый тип авто. Заполнить поля.

![](https://txcloud.atlassian.net/wiki/download/thumbnails/185827349/att_12_for_185827349.png?version=1&modificationDate=1611920076704&cacheVersion=1&api=v2&width=578&height=228)

:

* **Тип автомобиля -** из выпадающего списка необходимо выбрать существующий в программе тип автомобиля, для которого будет задаваться соответствие.
* **Название в приложении -** в данном поле задается название типа автомобиля, которое увидит клиент при заказе через приложение.
* **Описание -** позволяет задать информацию о данном типе авто, которую увидит клиент у себя в приложении (например, тарификацию за 1км пути).
* **Краткое описание -** позволяет указать ключевую информацию о данном типе авто (например, минимальную стоимость вызова).
* **Дополнительная информация -** поле для указания дополнительных сведений по типу автомобиля (примеры марок/моделей автомобилей, которые относятся к данному типу, и т.д.).
* **Вид сбоку -** в данном поле можно загрузить изображение, которое будет использоваться для отображения типа автомобиля сбоку в приложении. Формат изображения png, размер - 548х255 пикселей (стандартный рекомендуемый размер, можно использовать отличные размеры, но в таком случае итоговое отображение может быть некорректным).
* **Вид сверху -** в данном поле можно загрузить изображение, которое будет использоваться для отображения типа автомобиля сверху на карте в приложении. Формат изображения png, размер - 51х107 пикселей (стандартный рекомендуемый размер, можно использовать отличные размеры, но в таком случае итоговое отображение может быть некорректным).

Скачать иконки для автомобилей можно скачать по ссылке [https://drive.google.com/file/d/192hoKzVonefJJx6asG87Zoyq-kAH8vvd/view?usp=sharing](https://drive.google.com/file/d/192hoKzVonefJJx6asG87Zoyq-kAH8vvd/view?usp=sharing)

![](https://txcloud.atlassian.net/wiki/download/thumbnails/185827349/att_13_for_185827349.png?version=1&modificationDate=1611920076806&cacheVersion=1&api=v2&width=578&height=313)

Далее розархивировать.

Открыть папку App. Папка Above - иконки вид сверху авто, папка Side - вид сбоку.

В каждой папке есть иконки под разные типы авто, разных цветов.

Загрузить их в программу можно нажав на кнопку Выбрать файл и выбрать необходимую иконку.

Сохранить.

Такие же шаги сделать для каждого типа авто.

1. Перейти на вкладку Типы заказов. Данный раздел содержит настройки соответствия типов заказов для приема заявок из клиентского приложения на разных платформах. В колонке Тип заказа выбрать из выпадающего списка созданный ранее тип заказа для клиентского приложения. Сохранить.
    ![](https://txcloud.atlassian.net/wiki/download/thumbnails/185827349/att_14_for_185827349.png?version=1&modificationDate=1611920076705&cacheVersion=1&api=v2&width=612&height=242)
2. Вкладка “Вопросы и ответы” - раздел, позволяющий администрации службы такси предоставить своим клиентам ответы на наиболее часто встречающиеся при работе с приложением вопросы. Для создания пары вопрос-ответ необходимо нажать кнопку “Добавить”. Окно создания вопроса-ответа содержит следующие поля настроек:

**- Вопрос -** укажите в этом поле вопрос, на который будет дан ответ.

- **Ответ -** в поле можно дать развернутый ответ на заданный вопрос.

![](https://txcloud.atlassian.net/wiki/download/thumbnails/185827349/att_15_for_185827349.png?version=1&modificationDate=1611920076553&cacheVersion=1&api=v2&width=612&height=261)

Обратите внимание, если в условиях работы водителей используются списания, которые зависят от типа заказа, необходимо зайти в Администрирование - Водители - Условия работы. Открыть условие и в правиле списания в поле тип заказа добавить “Клиентское приложение”.

![](https://txcloud.atlassian.net/wiki/download/thumbnails/185827349/att_16_for_185827349.png?version=1&modificationDate=1611920077162&cacheVersion=1&api=v2&width=612&height=244)![](https://txcloud.atlassian.net/wiki/download/thumbnails/185827349/att_17_for_185827349.png?version=1&modificationDate=1611920076752&cacheVersion=1&api=v2&width=612&height=233)